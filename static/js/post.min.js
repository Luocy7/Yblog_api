(function(){var f=new Headroom(document.getElementById("header"),{tolerance:0,offset:50,classes:{initial:"initial",pinned:"pinned",unpinned:"unpinned",top:"top",notTop:"not-top",notBottom:"not-bottom"}});var c=new Headroom(document.getElementById("sidebar"),{tolerance:0,offset:300,classes:{initial:"sidebar",pinned:"pinned",unpinned:"unpinned",top:"top",notTop:"not-top",notBottom:"sidebar"}});var e=$(".sticky-block-box").offset().top;var b=function(){var j=$("#sidebar");var k=$(document).scrollTop()-e+1;k>0?j.addClass("sticky"):j.removeClass("sticky")};var g=function(){var l=$(".catalog-list");var k=l.height();if(k>$(window).height()){var m=document.getElementsByClassName("toc-title active");if(m[0]){var j=m[0].offsetTop;var n=$(window).height()*2/5-j;if(n<0){l.css("margin-top",n+"px")}else{l.css("margin-top","0")}}}};var h=function(){$(window).scroll(function(){b();g()})};var d=function(){let article=document.getElementById("article");let postA=article.querySelectorAll("a");let header1=article.querySelectorAll("h1");if(header1[0]){header1[0].parentNode.removeChild(header1[0])}let header2=article.querySelectorAll("h2");for(let i=0;i<postA.length;i++){postA[i].setAttribute("target","_blank");postA[i].setAttribute("rel","noopener noreferrer nofollow")}for(let i=0;i<header2.length;i++){let spanNode1=document.createElement("span");let spanNode2=document.createElement("span");let textNode=document.createTextNode(header2[i].innerText);spanNode1.appendChild(textNode);header2[i].innerText="";header2[i].appendChild(spanNode1);header2[i].appendChild(spanNode2)}};function a(){this.settings={tocContainer:"#catalog",postContainer:"#article"};this.cateTopInit=$(".sticky-block-box").offset().top;this.createToc();this.bindClick();this.locateCataByContent();this.bindEvents()}a.prototype={createToc:function(){var j=["<dl class='catalog-list'>"];var k,m;var l=$(this.settings.postContainer).find("h2,h3,h4");if(!l.get(0)){$(".sticky-block-box").css("visibility","hidden")}l.each(function(n,p){if("h2"===$(p).prop("tagName").toLowerCase()){m="dt";k="level1"}else{if("h3"===$(p).prop("tagName").toLowerCase()){m="dd";k="level2"}else{m="dd";k="level3"}}var o="<"+m+' class="toc-title '+k+'"><a class="toca" href=\'javascript:void(0)\'>'+$(p).text()+"</a></"+m+">";j.push(o)});$(this.settings.tocContainer).html(j.join(""))},bindClick:function(){var m=this;var l=$(this.settings.postContainer).find("h2,h3,h4");var j=$(this.settings.tocContainer);var k=$("#sidebar");j.find(".toca").each(function(o,n){$(n).parent().on("click",function(){$(window).scrollTop(l.eq(o).offset().top-100);var p=$(document).scrollTop()-m.cateTopInit+1;p>0?k.addClass("sticky"):k.removeClass("sticky")})})},bindEvents:function(){var j=this;$(document).scroll(function(){j.locateCataByContent()})},locateCataByContent:function(){var p=$(this.settings.postContainer);var l=p.find("h2,h3,h4");var q=$(document).scrollTop();var k=$(".catalog-list");for(var m=0,j=l.length;m<j;m++){var o=l[m],n=l[m+1];if($(o).offset().top-101<=q&&((m+1===j)||((m+1<j)&&$(n).offset().top>q))){k.find(".active").removeClass("active");k.children().eq(m).addClass("active")}}}};$(function(){d();var j=new a();b();g();h();f.init();c.init()})})();